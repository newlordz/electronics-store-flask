# Electronics Store Application

## Overview

This is a Flask-based e-commerce web application for selling electronics. The application supports multiple user roles (buyers, sellers, and admins) with a complete product catalog, shopping cart, order management system, and messaging features. The system is currently implemented with in-memory data storage for MVP purposes but is designed to be easily migrated to a persistent database.

## User Preferences

Preferred communication style: Simple, everyday language.

## System Architecture

### Frontend Architecture
- **Template Engine**: Jinja2 templates with Bootstrap 5 for responsive design
- **Styling**: Custom CSS with CSS variables for theming, gradient backgrounds, and modern UI components
- **JavaScript**: Vanilla JavaScript for interactive features (cart management, form validation, search, animations)
- **Icons**: Font Awesome 6.0 for consistent iconography
- **Responsive Design**: Mobile-first approach using Bootstrap grid system with custom enhancements

### Backend Architecture
- **Framework**: Flask (Python web framework) with modular route organization
- **Session Management**: Flask-Session with filesystem storage for user sessions
- **File Handling**: Werkzeug for secure file uploads with size limits (16MB max)
- **Authentication**: Custom session-based authentication with Werkzeug password hashing
- **Authorization**: Role-based access control with decorators for different user types
- **Error Handling**: Custom 404 and 500 error pages

### Data Storage Solutions
- **Database**: PostgreSQL with SQLAlchemy ORM for persistent data storage
- **Data Models**: SQLAlchemy models (User, Product, Order, OrderItem, CartItem, OrderComment) with database relationships
- **File Storage**: Local filesystem for uploaded product images in static/uploads directory
- **Session Storage**: Filesystem-based session storage for user authentication state

## Key Components

### User Management System
- **Multi-Role Authentication**: Three distinct user types with different permissions
  - **Buyers**: Browse products, manage shopping cart, place and track orders
  - **Sellers**: Manage product listings, view orders, handle order fulfillment (requires admin approval)
  - **Admins**: Complete system oversight, user management, order approval workflow
- **Registration Flow**: Email-based registration with role selection and seller approval process
- **Security**: Password hashing, session management, and role-based route protection

### Product Catalog System
- **Categories**: Predefined electronics categories (Laptops, Smartphones, Mice, Keyboards, Headphones, Tablets, Accessories)
- **Product Management**: CRUD operations for sellers with image upload capabilities
- **Search and Filtering**: Text search and category filtering for product discovery
- **Product Details**: Comprehensive product pages with images, descriptions, and seller information

### Shopping Cart and Orders
- **Cart Management**: Session-based shopping cart with quantity management
- **Checkout Process**: Multi-step checkout with order summary and shipping information
- **Order Workflow**: Multi-stage approval process (created → seller_approved → admin_approved → delivered → completed)
- **Order Tracking**: Real-time status updates and order history for buyers
- **Order Comments**: Messaging system between buyers, sellers, and admins for each order

### Dashboard Systems
- **Role-Specific Dashboards**: Customized interfaces for each user type
- **Statistics Cards**: Visual metrics for orders, products, revenue, and user activity
- **Management Tools**: Product management for sellers, user approval for admins
- **Order Management**: Different views for buyers (tracking) and sellers (fulfillment)

## Data Flow

### User Registration and Authentication
1. User registers with email, username, password, and role selection
2. Sellers enter "pending" status awaiting admin approval
3. Login creates server-side session with user ID storage
4. Role-based decorators control access to protected routes

### Product and Order Lifecycle
1. Approved sellers create products with images and descriptions
2. Buyers browse products using search and category filters
3. Products added to session-based shopping cart
4. Checkout creates order in "created" status
5. Seller reviews and approves order → "seller_approved"
6. Admin reviews and approves → "admin_approved" 
7. Seller marks as delivered → "delivered"
8. System or buyer marks as completed → "completed"

### Communication Flow
- Order comments enable three-way communication between buyer, seller, and admin
- Real-time messaging updates during order fulfillment process
- Admin oversight with ability to intervene at any stage

## External Dependencies

### Python Packages
- **Flask 3.1.1**: Core web framework
- **Flask-Session 0.8.0**: Session management
- **Werkzeug 3.1.3**: Security utilities and file handling
- **email-validator 2.2.0**: Email validation (referenced but may not be actively used)
- **gunicorn 23.0.0**: Production WSGI server

### Frontend Dependencies (CDN)
- **Bootstrap 5.3.0**: CSS framework and components
- **Font Awesome 6.4.0**: Icon library
- **Google Fonts (Inter)**: Custom typography

### Environment Variables
- **SESSION_SECRET**: Secret key for session security (defaults to dev key)
- **DATABASE_URL**: Optional PostgreSQL connection (for future database migration)

## Deployment Strategy

### Current Setup
- **Development**: Direct Flask development server on port 5000
- **Entry Point**: main.py with debug mode enabled
- **Static Files**: Served directly by Flask for uploaded images
- **Session Storage**: Filesystem-based in development

### Production Considerations
- **WSGI Server**: Gunicorn configured for production deployment
- **Proxy Configuration**: ProxyFix middleware for reverse proxy compatibility
- **Security**: Environment-based secret key management
- **Database Migration**: Ready for PostgreSQL integration with minimal code changes
- **File Storage**: Local filesystem (can be upgraded to cloud storage)

### Database Implementation
The application now uses PostgreSQL database with SQLAlchemy ORM:
- **Tables**: users, products, orders, order_items, cart_items, order_comments
- **Relationships**: Proper foreign key relationships between all entities
- **Migration**: Successfully migrated from in-memory storage to persistent database
- **Sample Data**: Includes admin user and sample products for testing